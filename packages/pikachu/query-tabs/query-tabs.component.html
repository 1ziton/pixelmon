<nz-tabset nzType="card" class="p-query-tabs">
  <ng-container *ngFor="let tab of tabs | filter: filterRule">
    <nz-tab [nzTitle]="titleTemplate">
      <ng-template #titleTemplate>
        <span class="p-query-tabs-label">{{ tab.title + 'ï¼š' }}</span>

        <ng-container *ngIf="(tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon)?.length > 10; else textTemplate">
          <span nz-popover nzTrigger="hover" [nzContent]="textTemplate" nzPlacement="bottom" class="p-query-tabs-value text-ellipsis">
            {{ tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon }}
          </span>
        </ng-container>

        <ng-template #textTemplate>
          <span class="p-query-tabs-value">
            {{ tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon }}
          </span>
        </ng-template>

        <i nz-icon nzType="close" class="ant-tabs-close-x" (click)="onClose(tab)"></i>
      </ng-template>
    </nz-tab>
  </ng-container>
</nz-tabset>
