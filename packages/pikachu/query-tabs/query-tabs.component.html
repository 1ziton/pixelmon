<nz-tabset nzType="card">
  <ng-container *ngFor="let tab of tabs | filter: filterRule">
    <nz-tab [nzTitle]="titleTemplate">
      <ng-template #titleTemplate>
        <div class="flex">
          <span class="label">{{ tab.title + 'ï¼š' }}</span>
          <ng-container *ngIf="(tab.searchValue | translate: tab.lexicon || lexicon)?.length > 10; else textTemplate">
            <div nz-popover nzTrigger="hover" [nzContent]="textTemplate" nzPlacement="bottom">
              <span class="value text-ellipsis">
                {{ tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon }}
              </span>
            </div>
          </ng-container>

          <ng-template #textTemplate>
            <div>
              <span class="value">
                {{ tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon }}
              </span>
            </div>
          </ng-template>

          <div>
            <i nz-icon nzType="close" class="ant-tabs-close-x" (click)="onClose(tab)"></i>
          </div>
        </div>
      </ng-template>
    </nz-tab>
  </ng-container>
</nz-tabset>
